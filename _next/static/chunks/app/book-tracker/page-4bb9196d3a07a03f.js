(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[983],{5489:function(e,t,s){Promise.resolve().then(s.bind(s,1131))},1131:function(e,t,s){"use strict";s.r(t);var a=s(7437),r=s(2265);t.default=function(){let[e,t]=r.useState("search"),[s,l]=r.useState(""),[i,n]=r.useState([]),[c,o]=r.useState(!1),[d,x]=r.useState([]),[m,g]=r.useState(!1),[h,u]=r.useState(null),[b,p]=r.useState(!1),[j,y]=r.useState(!1),[N,f]=r.useState(null),[v,w]=r.useState(!1),[k,_]=r.useState(null),[S,C]=r.useState(null),[T,L]=r.useState(!1),[O,z]=r.useState(!1),[E,A]=r.useState(!1),[P,F]=r.useState(5),[D,M]=r.useState(null),[R,I]=r.useState(null),[G,V]=r.useState(new Date().toISOString().split("T")[0]),[J,B]=r.useState(""),[q,Q]=r.useState(!1),U=r.useCallback(async e=>{let t=e||s;if(!t.trim()){n([]);return}o(!0),_(null);try{let e=await fetch("/api/search-books",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t})});if(!e.ok)throw Error("When fetching /api/search-books, the response was [".concat(e.status,"] ").concat(e.statusText));let s=await e.json();s.error?(_(s.error),n([])):n(s.books||[])}catch(e){console.error(e),_("Failed to search books"),n([])}finally{o(!1)}},[s]);r.useEffect(()=>{if(!s.trim()){n([]);return}let e=setTimeout(()=>{U(s)},500);return()=>clearTimeout(e)},[s,U]);let W=r.useCallback(async()=>{g(!0),_(null);try{let e=await fetch("/api/books-history",{method:"POST",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Failed to load books history");let t=await e.json();t.error?_(t.error):x(t.books||[])}catch(e){console.error(e),_("Failed to load books history")}finally{g(!1)}},[]),$=r.useCallback(async()=>{L(!0),_(null);try{let e=await fetch("/api/reading-stats",{method:"POST",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Failed to load statistics");let t=await e.json();t.error?_(t.error):C(t)}catch(e){console.error(e),_("Failed to load statistics")}finally{L(!1)}},[]),K=r.useCallback(async()=>{if(h){Q(!0),_(null);try{let t=await fetch("/api/add-book",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:h.title,author:h.author,isbn:h.isbn,cover_url:h.cover_url,publication_date:h.publication_date,pages:h.pages,description:h.description,overall_rating:P,writing_rating:D,story_rating:R,read_date:G,notes:J})});if(!t.ok)throw Error("Failed to add book");let s=await t.json();s.error?_(s.error):(p(!1),u(null),F(5),M(null),I(null),B(""),"history"===e&&W())}catch(e){console.error(e),_("Failed to add book")}finally{Q(!1)}}},[h,P,D,R,G,J,e,W]),Y=r.useCallback(e=>{f(e),F(e.overall_rating||5),M(e.writing_rating||null),I(e.story_rating||null),V(e.read_date?e.read_date.split("T")[0]:new Date().toISOString().split("T")[0]),B(e.notes||""),y(!0)},[]),H=r.useCallback(async()=>{if(N){A(!0),_(null);try{let e=await fetch("/api/update-rating",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_book_id:N.id,action:"update",overall_rating:P,writing_rating:D,story_rating:R,read_date:G,notes:J})});if(!e.ok)throw Error("Failed to update book");let t=await e.json();t.error?_(t.error):(y(!1),f(null),F(5),M(null),I(null),B(""),W())}catch(e){console.error(e),_("Failed to update book")}finally{A(!1)}}},[N,P,D,R,G,J,W]),X=r.useCallback(async e=>{if(confirm("Sei sicuro di voler eliminare questo libro dalla tua libreria?")){z(!0),_(null);try{let t=await fetch("/api/update-rating",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_book_id:e,action:"delete"})});if(!t.ok)throw Error("Failed to delete book");let s=await t.json();s.error?_(s.error):W()}catch(e){console.error(e),_("Failed to delete book")}finally{z(!1)}}},[W]);r.useEffect(()=>{"history"===e?W():"statistics"===e&&$()},[e,W,$]);let Z=e=>{let{rating:t,onRatingChange:s,label:r,readonly:l=!1}=e;return(0,a.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-900",children:r}),(0,a.jsx)("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>!l&&s&&s(e),disabled:l,className:"text-2xl transition-colors ".concat(l?"cursor-default":"hover:scale-110"," ").concat(e<=(t||0)?1===e?"text-red-500":2===e?"text-orange-500":3===e?"text-yellow-500":4===e?"text-lime-500":"text-green-500":"text-gray-300"),children:"★"},e))})]})},ee=e=>new Date(e).toLocaleDateString("it-IT",{year:"numeric",month:"long"}),et=e=>["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"][e-1];return(0,a.jsxs)("div",{className:"min-h-screen bg-white text-black",children:[(0,a.jsx)("div",{className:"border-b border-gray-200 bg-white",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-black",children:"I Miei Libri"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Tieni traccia dei tuoi libri letti"})]})}),(0,a.jsx)("div",{className:"border-b border-gray-200 bg-white",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-4",children:(0,a.jsxs)("div",{className:"flex space-x-8",children:[(0,a.jsx)("button",{onClick:()=>t("search"),className:"py-4 px-2 border-b-2 font-medium text-sm ".concat("search"===e?"border-black text-black":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Cerca Libri"}),(0,a.jsx)("button",{onClick:()=>t("history"),className:"py-4 px-2 border-b-2 font-medium text-sm ".concat("history"===e?"border-black text-black":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Cronologia Letture"}),(0,a.jsx)("button",{onClick:()=>t("statistics"),className:"py-4 px-2 border-b-2 font-medium text-sm ".concat("statistics"===e?"border-black text-black":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Statistiche"})]})})}),k&&(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-4",children:(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,a.jsx)("p",{className:"text-red-800",children:k})})}),(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:["search"===e&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsx)("input",{type:"text",value:s,onChange:e=>l(e.target.value),onKeyPress:e=>"Enter"===e.key&&U(),placeholder:"Cerca per titolo, autore o ISBN...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"}),(0,a.jsx)("button",{onClick:U,disabled:c||!s.trim(),className:"px-6 py-2 bg-black text-white rounded-md hover:bg-gray-800 disabled:bg-gray-400 disabled:cursor-not-allowed",children:c?"Cercando...":"Cerca"})]}),i.length>0&&(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:i.map((e,t)=>(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,a.jsxs)("div",{className:"flex space-x-4",children:[e.cover_url&&(0,a.jsx)("img",{src:e.cover_url,alt:e.title,className:"w-16 h-24 object-cover rounded"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"font-semibold text-sm line-clamp-2",children:e.title}),(0,a.jsx)("p",{className:"text-gray-600 text-sm mt-1",children:e.author}),e.publication_date&&(0,a.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:e.publication_date}),(0,a.jsx)("button",{onClick:()=>{u(e),p(!0)},className:"mt-2 px-3 py-1 bg-black text-white text-xs rounded hover:bg-gray-800",children:"Aggiungi alla Libreria"})]})]})},t))})]}),"history"===e&&(0,a.jsx)("div",{className:"space-y-6",children:m?(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-gray-600",children:"Caricamento cronologia..."})}):0===d.length?(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-gray-600",children:"Nessun libro letto ancora. Inizia cercando e aggiungendo libri!"})}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold",children:["Libri Letti (",d.length,")"]}),(0,a.jsx)("div",{className:"space-y-4",children:d.map(e=>(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg p-6",children:(0,a.jsxs)("div",{className:"flex space-x-6",children:[e.cover_url&&(0,a.jsx)("img",{src:e.cover_url,alt:e.title,className:"w-32 h-48 object-cover rounded flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-lg",children:e.title}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:e.author}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Letto: ",ee(e.read_date)]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>Y(e),className:"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Modifica"}),(0,a.jsx)("button",{onClick:()=>X(e.id),disabled:O,className:"px-3 py-1 text-sm bg-red-100 text-red-700 rounded hover:bg-red-200 disabled:opacity-50",children:"Elimina"})]})]}),(0,a.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Valutazione Generale:"}),(0,a.jsx)("div",{className:"flex",children:[1,2,3,4,5].map(t=>(0,a.jsx)("span",{className:"text-lg ".concat(t<=e.overall_rating?1===t?"text-red-500":2===t?"text-orange-500":3===t?"text-yellow-500":4===t?"text-lime-500":"text-green-500":"text-gray-300"),children:"★"},t))})]}),e.writing_rating&&(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Scrittura:"}),(0,a.jsx)("div",{className:"flex",children:[1,2,3,4,5].map(t=>(0,a.jsx)("span",{className:"text-lg ".concat(t<=e.writing_rating?1===t?"text-red-500":2===t?"text-orange-500":3===t?"text-yellow-500":4===t?"text-lime-500":"text-green-500":"text-gray-300"),children:"★"},t))})]}),e.story_rating&&(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Storia:"}),(0,a.jsx)("div",{className:"flex",children:[1,2,3,4,5].map(t=>(0,a.jsx)("span",{className:"text-lg ".concat(t<=e.story_rating?1===t?"text-red-500":2===t?"text-orange-500":3===t?"text-yellow-500":4===t?"text-lime-500":"text-green-500":"text-gray-300"),children:"★"},t))})]})]}),e.notes&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Note:"}),(0,a.jsx)("p",{className:"text-sm text-gray-700 mt-1",children:e.notes})]})]})]})},e.id))})]})}),"statistics"===e&&(0,a.jsx)("div",{className:"space-y-8",children:T?(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-gray-600",children:"Caricamento statistiche..."})}):S?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-black",children:S.summary.total_books}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Libri Letti"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-black",children:S.summary.books_this_year}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Quest'Anno"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-black",children:S.summary.books_this_month}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Questo Mese"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-black",children:S.summary.total_pages||0}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Pagine Lette"})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Valutazioni Medie"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Generale:"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"flex",children:[1,2,3,4,5].map(e=>(0,a.jsx)("span",{className:"text-lg ".concat(e<=Math.round(S.ratings.average_overall)?1===e?"text-red-500":2===e?"text-orange-500":3===e?"text-yellow-500":4===e?"text-lime-500":"text-green-500":"text-gray-300"),children:"★"},e))}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["(",S.ratings.average_overall,")"]})]})]}),S.ratings.average_writing>0&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Scrittura:"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"flex",children:[1,2,3,4,5].map(e=>(0,a.jsx)("span",{className:"text-lg ".concat(e<=Math.round(S.ratings.average_writing)?1===e?"text-red-500":2===e?"text-orange-500":3===e?"text-yellow-500":4===e?"text-lime-500":"text-green-500":"text-gray-300"),children:"★"},e))}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["(",S.ratings.average_writing,")"]})]})]}),S.ratings.average_story>0&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Storia:"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"flex",children:[1,2,3,4,5].map(e=>(0,a.jsx)("span",{className:"text-lg ".concat(e<=Math.round(S.ratings.average_story)?1===e?"text-red-500":2===e?"text-orange-500":3===e?"text-yellow-500":4===e?"text-lime-500":"text-green-500":"text-gray-300"),children:"★"},e))}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["(",S.ratings.average_story,")"]})]})]})]})]}),S.top_authors.length>0&&(0,a.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Autori Preferiti"}),(0,a.jsx)("div",{className:"space-y-2",children:S.top_authors.map((e,t)=>(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:e.author}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[e.book_count," libri"]})]},t))})]}),S.monthly_reading.length>0&&(0,a.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Letture per Mese"}),(0,a.jsx)("div",{className:"space-y-2",children:S.monthly_reading.map((e,t)=>(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("span",{className:"text-sm font-medium",children:[et(e.month)," ",e.year]}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[e.book_count," libri"]})]},t))})]}),S.ratings.distribution.length>0&&(0,a.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Distribuzione Valutazioni"}),(0,a.jsx)("div",{className:"space-y-2",children:S.ratings.distribution.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:e.rating}),(0,a.jsx)("span",{className:"text-lg ".concat(1===e.rating?"text-red-500":2===e.rating?"text-orange-500":3===e.rating?"text-yellow-500":4===e.rating?"text-lime-500":"text-green-500"),children:"★"})]}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[e.count," libri"]})]},e.rating))})]})]}):(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-gray-600",children:"Nessuna statistica disponibile. Aggiungi alcuni libri per vedere le statistiche!"})})})]}),b&&h&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsx)("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Aggiungi alla Libreria"}),(0,a.jsx)("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium",children:h.title}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:h.author})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Data di Lettura"}),(0,a.jsx)("input",{type:"month",value:G.substring(0,7),onChange:e=>V(e.target.value+"-01"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-black"})]}),(0,a.jsx)(Z,{rating:P,onRatingChange:F,label:"Valutazione Generale *"}),(0,a.jsx)(Z,{rating:D,onRatingChange:M,label:"Scrittura (opzionale)"}),(0,a.jsx)(Z,{rating:R,onRatingChange:I,label:"Storia (opzionale)"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Note (opzionale)"}),(0,a.jsx)("textarea",{value:J,onChange:e=>B(e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-black",placeholder:"Aggiungi le tue note sul libro..."})]}),(0,a.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,a.jsx)("button",{onClick:()=>p(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50",children:"Annulla"}),(0,a.jsx)("button",{onClick:K,disabled:q,className:"flex-1 px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 disabled:bg-gray-400",children:q?"Aggiungendo...":"Aggiungi"})]})]})]})})}),j&&N&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsx)("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Modifica Libro"}),(0,a.jsx)("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium",children:N.title}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:N.author})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Data di Lettura"}),(0,a.jsx)("input",{type:"month",value:G.substring(0,7),onChange:e=>V(e.target.value+"-01"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-black"})]}),(0,a.jsx)(Z,{rating:P,onRatingChange:F,label:"Valutazione Generale *"}),(0,a.jsx)(Z,{rating:D,onRatingChange:M,label:"Scrittura (opzionale)"}),(0,a.jsx)(Z,{rating:R,onRatingChange:I,label:"Storia (opzionale)"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Note (opzionale)"}),(0,a.jsx)("textarea",{value:J,onChange:e=>B(e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-black",placeholder:"Aggiungi le tue note sul libro..."})]}),(0,a.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,a.jsx)("button",{onClick:()=>y(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50",children:"Annulla"}),(0,a.jsx)("button",{onClick:H,disabled:E,className:"flex-1 px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 disabled:bg-gray-400",children:E?"Aggiornando...":"Aggiorna"})]})]})]})})}),v&&h&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsx)("div",{className:"bg-white rounded-lg max-w-lg w-full max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Dettagli Libro"}),(0,a.jsx)("button",{onClick:()=>w(!1),className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex space-x-4",children:[h.cover_url&&(0,a.jsx)("img",{src:h.cover_url,alt:h.title,className:"w-24 h-36 object-cover rounded flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg",children:h.title}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:h.author}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Letto: ",ee(h.read_date)]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[h.publication_date&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Data di Pubblicazione:"}),(0,a.jsx)("p",{className:"text-sm text-gray-700 mt-1",children:h.publication_date})]}),h.pages&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Pagine:"}),(0,a.jsx)("p",{className:"text-sm text-gray-700 mt-1",children:h.pages})]}),h.isbn&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"ISBN:"}),(0,a.jsx)("p",{className:"text-sm text-gray-700 mt-1",children:h.isbn})]}),h.description&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Descrizione:"}),(0,a.jsx)("p",{className:"text-sm text-gray-700 mt-1 leading-relaxed",children:h.description})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Le Tue Valutazioni"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Generale:"}),(0,a.jsx)("div",{className:"flex",children:[1,2,3,4,5].map(e=>(0,a.jsx)("span",{className:"text-lg ".concat(e<=h.overall_rating?1===e?"text-red-500":2===e?"text-orange-500":3===e?"text-yellow-500":4===e?"text-lime-500":"text-green-500":"text-gray-300"),children:"★"},e))})]}),h.writing_rating&&(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Scrittura:"}),(0,a.jsx)("div",{className:"flex",children:[1,2,3,4,5].map(e=>(0,a.jsx)("span",{className:"text-lg ".concat(e<=h.writing_rating?1===e?"text-red-500":2===e?"text-orange-500":3===e?"text-yellow-500":4===e?"text-lime-500":"text-green-500":"text-gray-300"),children:"★"},e))})]}),h.story_rating&&(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Storia:"}),(0,a.jsx)("div",{className:"flex",children:[1,2,3,4,5].map(e=>(0,a.jsx)("span",{className:"text-lg ".concat(e<=h.story_rating?1===e?"text-red-500":2===e?"text-orange-500":3===e?"text-yellow-500":4===e?"text-lime-500":"text-green-500":"text-gray-300"),children:"★"},e))})]})]}),h.notes&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Le Tue Note:"}),(0,a.jsx)("p",{className:"text-sm text-gray-700 mt-1 leading-relaxed bg-gray-50 p-3 rounded-md",children:h.notes})]}),(0,a.jsx)("div",{className:"flex space-x-3 pt-4",children:(0,a.jsx)("button",{onClick:()=>w(!1),className:"flex-1 px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800",children:"Chiudi"})})]})]})})})]})}},622:function(e,t,s){"use strict";var a=s(2265),r=Symbol.for("react.element"),l=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,n=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function o(e,t,s){var a,l={},o=null,d=null;for(a in void 0!==s&&(o=""+s),void 0!==t.key&&(o=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,a)&&!c.hasOwnProperty(a)&&(l[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===l[a]&&(l[a]=t[a]);return{$$typeof:r,type:e,key:o,ref:d,props:l,_owner:n.current}}t.Fragment=l,t.jsx=o,t.jsxs=o},7437:function(e,t,s){"use strict";e.exports=s(622)}},function(e){e.O(0,[971,938,744],function(){return e(e.s=5489)}),_N_E=e.O()}]);